---
import axios from "axios";
import dotenv from "dotenv";
import SkillsSection from "../components/SkillsSection.astro";
import Layout from "../layouts/Layout.astro";
import type { ContactInfo } from "../models/contactInfo";
import type { Skills } from "../models/skills";

dotenv.config();

const API_URL =
	process.env.NODE_ENV === "production"
		? "http://backend:3000"
		: "http://localhost:3000";

const aboutReq = await axios.get(`${API_URL}/contact`);
const aboutData: ContactInfo = aboutReq.data;

const skillsReq = await axios.get(`${API_URL}/skills`);
const skillsData: Skills[] = skillsReq.data;
---

<Layout title="About - Siddharth Rao's Portfolio">
	<main
		class="flex flex-col items-start justify-start pt-32 p-12 max-w-4xl mx-auto"
	>
		<h1 class="title text-5xl font-extrabold tracking-wide">ABOUT</h1>
		<p class="text-xl mt-6 leading-relaxed">{aboutData.about}</p>

		<h2 class="title text-4xl font-extrabold tracking-wide mt-12">SKILLS</h2>
		<div class="mt-6 flex flex-wrap gap-8">
			{
				skillsData.map((skill) => (
					<SkillsSection title={skill.category} items={skill.skills} />
				))
			}
		</div>
	</main>

	<style>
		.title {
			color: #e5e7eb;
			text-shadow:
				0 0 4px rgba(255, 255, 255, 0.4),
				0 0 8px rgba(255, 255, 255, 0.2);
		}
	</style>
</Layout>
