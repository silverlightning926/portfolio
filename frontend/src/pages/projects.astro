---
import axios from "axios";
import dotenv from "dotenv";
import ProjectSection from "../components/ProjectSection.astro";
import Layout from "../layouts/Layout.astro";
import type { Project } from "../models/projects";

dotenv.config();

const API_URL =
	process.env.NODE_ENV === "production"
		? "http://backend:3000"
		: "http://localhost:3000";

const projectsReq = await axios.get(`${API_URL}/projects`);
const projectsData: Project[] = projectsReq.data;
---

<Layout title="Projects - Siddharth Rao's Portfolio">
	<main
		class="flex flex-col items-start justify-start pt-32 p-12 max-w-4xl mx-auto"
	>
		<h1 class="title text-5xl font-extrabold tracking-wide">PROJECTS</h1>
		<section class="mt-12">
			{
				projectsData.map((project) => {
					return (
						<ProjectSection name={project.name} bulletPoints={project.bulletPoints} />
					);
				})
			}
		</section>
	</main>

	<style>
		.title {
			color: #e5e7eb;
			text-shadow:
				0 0 4px rgba(255, 255, 255, 0.4),
				0 0 8px rgba(255, 255, 255, 0.2);
		}
	</style>
</Layout>
